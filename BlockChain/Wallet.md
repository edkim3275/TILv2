# WALLET ğŸ”

## Dev History

### Web3.js vs. Ethers.js

> Wallet FE ê°œë°œì„ í•˜ê²Œë˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì ‘í•´ë´¤ì„ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ web3.jsì™€ ethers.jsê°€ ìˆìŒ. ë‹¤ë§Œ ë‘ ê°€ì§€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íŠ¹ì§•ì´ë‚˜ ì°¨ì´ì— ëŒ€í•´ ì•Œê³  ì‚¬ìš©í•˜ì.

- ë‘ ê°€ì§€ ëª¨ë‘ decentralized applications ë¹Œë”©ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ê³  EVM í˜¸í™˜ ë¸”ë¡ì²´ì¸ì—ì„œ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì„ ì œê³µí•˜ëŠ” ë…¸ë“œ íŒ¨í‚¤ì§€
- web3.jsëŠ” ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ì´ê³ , ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ê°œë°œì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  í•œë‹¤ë©´ ethers.js ë””ì§€í„¸ ìì‚°ê³¼ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ìƒì„±ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ë³¼ ìˆ˜ ìˆìŒ
- web3.js
  - Ethereum Foundationì—ì„œ ê°œë°œí•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ëŠ” ê³µì‹ JavaScript API ë¼ì´ë¸ŒëŸ¬ë¦¬
  - ì£¼ë¡œ ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” DApp ê°œë°œì— ì‚¬ìš©
- ethers.js
  - Richard Moore(https://github.com/ricmoo)ê°€ ê°œë°œ
  - ì´ë”ë¦¬ì›€ ë¸”ë¡ì²´ì¸ ë° í•´ë‹¹ ìƒíƒœê³„ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
  - APIë¥¼ ë‘ ê°€ì§€ ì—­í• ë¡œ ë‚˜ëˆ„ì–´ ê°œë°œìì—ê²Œ ìœ ì—°ì„±ì„ ì œê³µ
    - ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•œ ìµëª… ì—°ê²°ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê³µê¸‰ì(provider)
    - ê°œì¸í‚¤ì— ì—‘ì„¸ìŠ¤í•˜ê³  ê±°ë˜ì— ì„œëª…í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì„œëª…ì(signer)
- ê²°êµ­ í”„ë¡œì íŠ¸ì˜ ìš”êµ¬ì‚¬í•­, ê°œë°œì ê²½í—˜, ì»¤ë®¤ë‹ˆí‹° ì§€ì› ë“± ìš”ì¸ì— ì˜í•´ ê²°ì •í•˜ë©´ ë¨

## Self Q&A

### í†µí•©ì§€ê°‘ ê°œë°œì— ëŒ€í•œ ê³ ì°°

- í˜„ì¬ ê°œë°œí•˜ë ¤ëŠ” ë¸”ë¡ì²´ì¸ ì›”ë ›ì€ HD(Hierarchical Deterministic) wallet

- HD ì§€ê°‘ì€ ì—¬ëŸ¬ ê°œì˜ ì£¼ì†Œë¥¼ ê´€ë¦¬í•˜ê³ , ê° ì£¼ì†ŒëŠ” ê²½ë¡œì™€ ì¸ë±ìŠ¤ë¥¼ í†µí•´ ìœ ë„ë¨

- ë”°ë¼ì„œ ì—¬íƒ€ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì—ì„œ ìƒì„±í•œ ì§€ê°‘ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ì§€ê°‘ì˜ ê°œì¸í‚¤, ê²½ë¡œì™€ ì¸ë±ìŠ¤ê°€ í•„ìš”

- ì¼ë°˜ì ì¸ ê²½ë¡œëŠ” ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ì„ ê°€ì§

  `m / purpose' / coin_type' / account' / change / address_index`

  ex) `m/44'/60'/0'/0/0`

  `m`ì€ ë§ˆìŠ¤í„° í‚¤ë¥¼ ë‚˜íƒ€ë‚´ê³ , `44'`ëŠ” BIP-44ì˜ ê²½ë¡œ ë“±ì„ ë‚˜íƒ€ëƒ„. ë‹¤ë¥¸ ê²½ë¡œ ì •ë³´ë„ ìˆì„ ìˆ˜ ìˆê³ , ê° ê²½ë¡œëŠ” ë‹¤ë¥¸ ì£¼ì†Œë¥¼ ìƒì„±í•¨

- ë©”íƒ€ë§ˆìŠ¤í¬ TEST

  > ê·¸ë ‡ë‹¤ë©´ ë©”íƒ€ë§ˆìŠ¤í¬ëŠ” ì–´ë– í•œ ê²½ë¡œë¡œ ì§€ê°‘ì„ ìƒì„±í•˜ê³  ìˆì„ê¹Œ

  - ì¼ë‹¨ ë©”íƒ€ë§ˆìŠ¤í¬ëŠ” ê³„ì •ë§ˆë‹¤ ê°œì¸í‚¤ê°€ ëª¨ë‘ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŒ(ìƒì„±ëœ ê³„ì •ë§ˆë‹¤ ê³ ìœ ì˜ ê°œì¸í‚¤ ë¶€ì—¬)

  - ì¦‰, ë©”íƒ€ë§ˆìŠ¤í¬ ì§€ê°‘ì— ëŒ€í•œ ë§ˆìŠ¤í„°í‚¤(ë³µêµ¬êµ¬ë¬¸)ê°€ ì¡´ì¬í•˜ê³  í•´ë‹¹ ë§ˆìŠ¤í„°í‚¤ë¡œ íŒŒìƒë˜ëŠ” ê°œì¸í‚¤ê°€ ì¡´ì¬

  - ê³„ì •ì¶”ê°€ë¡œì§

    ë§ˆìŠ¤í„°í‚¤ë¡œ ìƒì„±ëœ ì§€ê°‘ì˜ ê²½ë¡œë¡œë¶€í„° ì¸ë±ìŠ¤ê°€ 1ì”© ë”í•´ì§€ë©´ì„œ ìƒì„±ì´ë¨

    ```javascript
    const { ethers } = require('ethers');
    
    const recoverPhrase = '12ê°œ í˜¹ì€ 24ê°œì˜ ë³µêµ¬êµ¬ë¬¸(ë‹¨ì–´)';
    
    // first wallet from masterkey
    const masterWallet = ethers.HDNodeWallet.fromPhrase(recoverPhrase);
    // second wallet from privatekey
    const childWallet = ethers.HDNodeWallet.fromMnemonic(recoverPhrase, "m/44'/60'/0'/0/1")
    ```

- ë‚¨ì•„ìˆëŠ” ê¶ê¸ˆì¦ ë° ê°œì„ ì 

  - ê°€ì ¸ì˜¨ ì§€ê°‘ê³¼ ê¸°ì¡´ ì§€ê°‘ê³¼ì˜ íš¨ê³¼ì ì¸ êµ¬ë¶„ ë°©ë²•ì€ ë¬´ì—‡ì¼ì§€
  - (ë¶€ë¦¬ë˜ ì›”ë ›) ë©€í‹° ì½”ì¸ ì§€ê°‘ vs. ì²´ì¸ë³„ ì§€ê°‘


### ë©€í‹° ì½”ì¸ ì§€ê°‘

- ë¡œë˜”ë‹¤ì—ì„œ ê°œë°œí•˜ê³ ìˆëŠ” ë¸Œë¦¬ë˜ ì›”ë ›ì—ì„œëŠ” ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì½”ì¸ì„ í†µí•© ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë©€í‹° ì½”ì¸ ì§€ê°‘ì„ ì œê³µ

- ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ê±¸ê¹Œ ìƒê°í•´ë³´ë©´

  - ì²˜ìŒ íšŒì›ê°€ì… ì‹œ(íœ´ëŒ€í° ë³¸ì¸ì¸ì¦, ë¡œê·¸ì¸ ë¹„ë°€ë²ˆí˜¸ ë“±ì˜ ì •ë³´ì…ë ¥) ë§ˆìŠ¤í„°í‚¤ë¥¼ ë°œê¸‰í•˜ê³  í•´ë‹¹ í‚¤ë¥¼ ë””ë°”ì´ìŠ¤ì— ì €ì¥
  - ë§ˆìŠ¤í„°í‚¤ì— ëŒ€í•œ ë””ë°”ì´ìŠ¤ ì €ì¥ì˜ ê²½ìš°
    - ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì˜ ê²½ìš° ì•ˆì „í•œ ì €ì¥ì†Œë‚˜ í‚¤ì²´ì¸ì— ì•”í˜¸í™”ëœ ê°œì¸í‚¤ë¥¼ ì €ì¥
    - ì•ˆì „í•œ ì €ì¥ì†ŒëŠ” iOS ê¸°ê¸°ì˜ ê²½ìš° Secure Enclaveì´ë‚˜ Android ê¸°ê¸°ì˜ ê²½ìš° Strongboxë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
    - ëŒ€ë¶€ë¶„ì˜ ëª¨ë°”ì¼ ìš´ì˜ì²´ì œì—ì„œ ê°œì¸í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê¸° ìœ„í•´ í‚¤ì²´ì¸ì„ í™œìš©. í‚¤ì²´ì¸ì€ ê°œë°œìê°€ ì ‘ê·¼í•  ìˆ˜ ì—†ê³  ì•ˆì „í•œ ì•”í˜¸í™”ë¥¼ ì œê³µ
    - ì•ˆë“œë¡œì´ë“œì˜ ê²½ìš° Android Keystoreë¼ê³ , ì•ˆë“œë¡œì´ë“œ ìš´ì˜ì²´ì œì—ì„œ ê°œì¸í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì €ì¥ì†Œë¥¼ ì œê³µ
  - ë©€í‹° ì½”ì¸ ì§€ê°‘ì€ ë§ˆìŠ¤í„°í‚¤ë¡œ ë„¤íŠ¸ì›Œí¬ì— ë”°ë¥¸ ê³µê°œí‚¤ ë° ì£¼ì†Œë¥¼ ìƒì„±í•˜ì—¬ ì œê³µí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ì˜ ì§€ê°‘ì„ ìƒì„±(í•˜ë‚˜ì˜ ë©€í‹° ì½”ì¸ ì§€ê°‘ì€ ì œê³µí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì¢…ë¥˜ì— ëŒ€í•œ ì½”ì¸ ê´€ë¦¬ê°€ ê°€ëŠ¥)
  - ì €ì¥ëœ ë§ˆìŠ¤í„°í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€ ë©€í‹° ì½”ì¸ ì§€ê°‘ì„ ìƒì„±
  - ì§€ê°‘ ê°€ì ¸ì˜¤ê¸°ì˜ ê²½ìš°
    - ê°€ì ¸ì˜¤ë ¤ëŠ” ì§€ê°‘ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„ íƒ í›„, í•´ë‹¹ ì§€ê°‘ì˜ ê°œì¸í‚¤ë¥¼ ì…ë ¥í•˜ë¯€ë¡œ ì‚¬ì „ì— ì—…ë¬´ í˜‘ì•½ì´ ë§ºì–´ì ¸ ìˆê±°ë‚˜, ë¡œë˜”ë‹¤ ì¸¡ì—ì„œ íŒŒì•…ëœ ì§€ê°‘ ê²½ë¡œë¥¼ í†µí•´ í•´ë‹¹ ì§€ê°‘ì„ ì¬ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ì§€ ì•Šì„ê¹Œ ì¶”ì¸¡ë¨

- ê·¸ë ‡ë‹¤ë©´ ì›¹ì—ì„œ ì œê³µí•˜ëŠ” ë¸”ë¡ì²´ì¸ ì§€ê°‘ì˜ ê²½ìš° ê°œì¸í‚¤ë¥¼ ì–´ë””ì— ë³´ê´€í•  ìˆ˜ ìˆì„ê¹Œ

  - ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì•”í˜¸í™”ëœ í‚¤ìŠ¤í† ì–´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë‚˜ ë¸Œë¼ìš°ì €ì˜ ì·¨ì•½ì ì´ë‚˜ ë³´ì•ˆ ë¬¸ì œë¡œ ìœ„í—˜í•  ìˆ˜ ìˆìŒ

    ```javascript
    // ê°œì¸í‚¤ ì €ì¥ í•¨ìˆ˜
    function storePrivateKey(encryptedPrivateKey) {
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì•”í˜¸í™”ëœ ê°œì¸í‚¤ ì €ì¥
      localStorage.setItem('encryptedPrivateKey', encryptedPrivateKey);
    }
    ```

  - ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ ê°œì¸í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ê³  ì•”í˜¸í™”í•  ìˆ˜ ìˆìŒ

    - ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì§€ì›í•˜ëŠ” ì•ˆì „í•œ ìŠ¤í† ë¦¬ì§€ë‚˜ ë¸Œë¼ìš°ì €ì˜ í™•ì¥ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë¡œì§ì„ êµ¬ì„±í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

      ```javascript
      // ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì•ˆì „í•œ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©
      const storage = chrome.storage.local; // Chrome í™•ì¥ í”„ë¡œê·¸ë¨ ì˜ˆì œ, Firefoxì™€ ê°™ì€ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
      
      // ê°œì¸í‚¤ ì €ì¥
      const storePrivateKey = (encryptedPrivateKey) => {
        const data = { privateKey: encryptedPrivateKey };
        
        storage.set(data, () => {
          if (chrome.runtime.lastError) {
            console.error('Error storing private key: ' + chrome.runtime.lastError);
          } else {
            console.log('Private key stored successfully');
          }
        })
      }
      
      // ê°œì¸í‚¤ ë¡œë“œ
      const loadPrivateKey = (callback) => {
        storage.get(['privateKey'], (result) => {
          const encryptedPrivateKey = result.privateKey || null;
          callback(encryptedPrivateKey);
        })
      }
      
      // ê°œì¸í‚¤ ë¡œë“œ ë° ë³µí˜¸í™”
      loadPrivateKey(function(encryptedPrivateKey) {
        if (encryptedPrivateKey) {
          const decryptedPrivateKey = decrypt(encryptedPrivateKey, password);
          console.log('Loaded and decrypted Private Key:', decryptedPrivateKey);
        } else {
          console.error('Private Key not found.');
        }
      });
      ```

    - ì¼ë¶€ ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ì€ ì•”í˜¸ ê´€ë¦¬ì™€ ê´€ë ¨ëœ ì¶”ê°€ ë³´ì•ˆ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŒ. ì˜ˆë¥¼ ë“¤ì–´, ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±, 2ë‹¨ê³„ ì¸ì¦, ìƒì²´ ì¸ì‹ ê¸°ìˆ  ë“±ì„ í†µí•´ ë” ë†’ì€ ë³´ì•ˆ ìˆ˜ì¤€ì„ ì œê³µí•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

  - ê°œì¸í‚¤ë¥¼ í•˜ë“œì›¨ì–´ ì§€ê°‘ì— ì €ì¥í•˜ì—¬ íŠ¸ëœì­ì…˜ì„ ì„œëª…í•˜ê±°ë‚˜ ê¸°íƒ€ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ í•˜ë“œì›¨ì–´ ì§€ê°‘ì„ ì—°ê²°í•˜ì—¬ ê°œì¸í‚¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŒ
