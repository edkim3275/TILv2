환경변수 사용 방식

## 1. 환경변수 파일 생성

- 프로젝트 루트에 `.env` 파일을 생성

- 파일종류

  | 파일명           | 설명                            |
  | ---------------- | ------------------------------- |
  | .env.local       | 로컬 개발용(git 커밋되지 않음)  |
  | .env.development | 개발 환경 전용                  |
  | .env.production  | 배포 환경 전용                  |
  | .env             | 공통 환경변수(모든 환경에 적용) |

  일반적으로 `.env.local` 우선순위가 가장 높음

## 2. 서버 전용 vs 클라이언트 전용 변수

- Next.js에서는 보안상의 이유로 클라이언트로 노출 되는 환경변수를 제한한다.
- 규칙
  - `NEXT_PUBLIC_` 으로 시작하는 변수만 클라이언트 번들에 포함 된다.
  - 나머지(`DATABASE_URL...` 등)는 서버 전용으로 처리

## 3. 사용 방법

- 서버 컴포넌트

  ```ts
  export async function GET() {
    const db_url = process.env.DATABASE_URL;
    ...
  }
  ```

- 클라이언트 컴포넌트

  ```tsx
  'use client';
  
  export default function Home() {
  	return (
    	<div>
      	<p>API_URL : {process.env.NEXT_PUBLIC_API_URL}</p>
      </div>
    )
  }
  ```

## 4. 타입 지원

- TypeScript에서 안전하게 다루고 싶다면 env.d.ts를 추가해서 설정 가능

  ```ts
  declare namespace NodeJS {
    interface ProcessEnv {
      DATABASE_URL: string;
      JWT_SECRET: string;
      NEXT_PUBLIC_API_URL: string;
    }
  }
  ```

  

